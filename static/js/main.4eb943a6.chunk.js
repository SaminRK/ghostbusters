(this.webpackJsonpghostbusters=this.webpackJsonpghostbusters||[]).push([[0],{13:function(t,e,s){},14:function(t,e,s){},15:function(t,e,s){},17:function(t,e,s){"use strict";s.r(e);var r=s(1),i=s.n(r),o=s(4),a=s.n(o),n=(s(13),s(14),s(5)),c=s(6),h=s(2),d=s(8),l=s(7),u=(s(15),s(0)),f=function(t){Object(d.a)(s,t);var e=Object(l.a)(s);function s(t){var r;return Object(n.a)(this,s),(r=e.call(this,t)).state={rows:10,columns:10,grid:r.getInitialGameGrid(10,10),move:[[1,30,1],[30,1,30],[1,30,1]],pos:r.getInitialPosition(10,10),colorGrid:r.getInitialColorGrid(10,10),bustMode:!1,hitGrid:r.getInitialHitGrid(10,10),busted:!1,bustsLeft:3},r.advanceTime=r.advanceTime.bind(Object(h.a)(r)),r.toggleBustMode=r.toggleBustMode.bind(Object(h.a)(r)),r}return Object(c.a)(s,[{key:"getInitialHitGrid",value:function(t,e){for(var s=new Array(t),r=0;r<t;++r){s[r]=[];for(var i=0;i<e;++i)s[r][i]=-1}return s}},{key:"getInitialGameGrid",value:function(t,e){for(var s=new Array(t),r=0;r<t;++r){s[r]=[];for(var i=0;i<e;++i)s[r][i]=1/(t*e)}return s}},{key:"getInitialPosition",value:function(t,e){var s=Math.floor(Math.random()*t),r=Math.floor(Math.random()*e);return console.log({row:s,col:r}),[s,r]}},{key:"getColor",value:function(t){return"r"===t?"red":"o"===t?"orange":"y"===t?"yellow":"g"===t?"green":"black"}},{key:"getInitialColorGrid",value:function(t,e){for(var s=new Array(t),r=0;r<t;++r){s[r]=[];for(var i=0;i<e;++i)s[r][i]=" "}return s}},{key:"getBoxBgColor",value:function(t){var e,s,r,i=this.state.rows,o=this.state.columns;return r=i*o*t<=1?Math.max(150,Math.min(255,Math.floor(i*o*t*256))):t<.5?Math.min(255,Math.floor(256*(1-t))):0,(e=Math.min(255,Math.floor(t*o*256)))+r>255?(s=.3*Math.min(r,e),r*=.85,e*=.6):s=Math.min(r,e),"rgb(".concat(e,", ").concat(s,", ").concat(r,")")}},{key:"toggleBustMode",value:function(){if(0!==this.state.bustsLeft){var t=!this.state.bustMode;this.setState({bustMode:t})}}},{key:"setGridAfterSensor",value:function(t,e){var s=this.state.pos[0],r=this.state.pos[1],i=this.state.rows,o=this.state.columns,a=Math.abs(e-r)+Math.abs(t-s),n="g";a<=1?n="r":a<=2?n="o":a<=4&&(n="y");var c=this.state.colorGrid;c[t][e]=n;var h,d,l=new Array(i),u=new Array(i);for(h=0;h<i;++h)for(l[h]=[],u[h]=[],d=0;d<o;++d)l[h][d]=0,u[h][d]=0;for(h=0;h<i;++h)for(d=0;d<o;++d){var f=Math.abs(t-h)+Math.abs(e-d);f<=1?"r"===n&&(u[h][d]=1):f<=2?"o"===n&&(u[h][d]=1):f<=4?"y"===n&&(u[h][d]=1):"g"===n&&(u[h][d]=1)}var b=0;for(h=0;h<i;++h)for(d=0;d<i;++d)l[h][d]=u[h][d]*this.state.grid[h][d],b+=l[h][d];if(!(b<1e-18)){for(h=0;h<i;++h)for(d=0;d<i;++d)l[h][d]/=b;this.setState({grid:l,colorGrid:c})}}},{key:"bust",value:function(t,e){var s,r,i=this.state.hitGrid,o=this.state.rows,a=this.state.columns,n=this.state.grid;if(t===this.state.pos[0]&&e===this.state.pos[1]){for(s=0;s<o;++s)for(r=0;r<a;++r)n[s][r]=0;this.state.hitGrid[t][e]=1,n[t][e]=1}else this.state.hitGrid[t][e]=0,n[t][e]=0;var c=0;for(s=0;s<o;++s)for(r=0;r<a;++r)c+=n[s][r];if(c>1e-18)for(s=0;s<o;++s)for(r=0;r<a;++r)n[s][r]/=c;this.state.busted=!0;var h=this.state.bustsLeft-1;this.setState({hitGrid:i,bustMode:!1,bustsLeft:h,grid:n})}},{key:"handleClick",value:function(t,e){this.state.bustMode?this.bust(t,e):this.setGridAfterSensor(t,e)}},{key:"advanceTime",value:function(){var t,e,s,r,i=this.state.rows,o=this.state.columns,a=this.state.move,n=this.state.pos[0],c=this.state.pos[1],h=0;for(s=n-1;s<=n+1;++s)for(r=c-1;r<=c+1;++r)s>=0&&s<i&&r>=0&&r<o&&(h+=a[s-n+1][r-c+1]);var d=Math.floor(Math.random()*h),l=0,u=i-1,f=o-1;for(s=n-1;s<=n+1;++s)for(r=c-1;r<=c+1;++r)if(s>=0&&s<i&&r>=0&&r<o&&(l+=a[s-n+1][r-c+1])>d){u=s,f=r,s=n+100;break}var b=new Array(i);for(t=0;t<i;++t)for(b[t]=[],e=0;e<o;++e)b[t][e]=0;for(t=0;t<i;++t)for(e=0;e<o;++e){for(h=0,s=t-1;s<=t+1;++s)for(r=e-1;r<=e+1;++r)s>=0&&s<i&&r>=0&&r<o&&(h+=a[s-t+1][r-e+1]);for(s=t-1;s<=t+1;++s)for(r=e-1;r<=e+1;++r)s>=0&&s<i&&r>=0&&r<o&&(b[s][r]+=this.state.grid[t][e]*a[s-t+1][r-e+1]/h)}var g=this.getInitialColorGrid(i,o);this.state.busted?(this.state.busted=!1,this.setState({grid:b,colorGrid:g,pos:[u,f],bustMode:!1,hitGrid:this.getInitialHitGrid(i,o)})):this.setState({grid:b,colorGrid:g,pos:[u,f],bustMode:!1})}},{key:"render",value:function(){var t=this,e={width:"".concat(75*this.state.columns,"px"),margin:"auto"};return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"gameGrid",children:this.state.grid.map((function(s,r){return Object(u.jsx)("div",{style:e,children:s.map((function(e,s){var i=e.toFixed(3),o={background:t.getBoxBgColor(t.state.grid[r][s])};return" "!==t.state.colorGrid[r][s]&&(o.border="4px solid ".concat(t.getColor(t.state.colorGrid[r][s]))),0===t.state.hitGrid[r][s]?(o.background="green",i="MISS"):t.state.hitGrid[r][s]>=1&&(o.background="red",i="HIT",t.state.hitGrid[r][s]>1&&(i+="".concat(t.state.hitGrid[r][s]))),Object(u.jsx)("button",{className:"boxes",onClick:t.handleClick.bind(t,r,s),style:o,children:i},r*t.state.columns+s)}))},r)}))}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"centraliser",children:[Object(u.jsx)("button",{className:"control-buttons",onClick:this.advanceTime,children:"TIME+1"}),Object(u.jsx)("button",{className:"control-buttons bustButton"+(this.state.bustMode?"Red":""),onClick:this.toggleBustMode,children:"BUST"})]}),Object(u.jsx)("div",{className:"centraliser",children:"POSITION: (".concat(this.state.pos[0],", ").concat(this.state.pos[1],")")}),Object(u.jsx)("div",{className:"centraliser",children:"BUSTS LEFT X ".concat(this.state.bustsLeft)}),Object(u.jsxs)("div",{className:"centraliser credit",children:["This game is a web-version of the ghostbusters game from the course CS188:Intro to AI at UC Berkeley\xa0",Object(u.jsx)("a",{href:"https://inst.eecs.berkeley.edu/~cs188/",children:"visit to know more"})]})]})]})}}]),s}(i.a.Component);var b=function(){return Object(u.jsx)(f,{})},g=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,18)).then((function(e){var s=e.getCLS,r=e.getFID,i=e.getFCP,o=e.getLCP,a=e.getTTFB;s(t),r(t),i(t),o(t),a(t)}))};a.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(b,{})}),document.getElementById("root")),g()}},[[17,1,2]]]);
//# sourceMappingURL=main.4eb943a6.chunk.js.map